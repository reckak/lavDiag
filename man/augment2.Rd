% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/augment2.R
\name{augment2}
\alias{augment2}
\title{Add predicted indicator values, residuals, and (optionally) CIs for continuous indicators}
\usage{
augment2(
  fit,
  prefix_yhat = ".yhat_",
  prefix_resid = ".resid_",
  ci = c("none", "delta"),
  level = 0.95,
  prefix_ci = c(".yhat_lwr_", ".yhat_upr_")
)
}
\arguments{
\item{fit}{A fitted \code{lavaan} object with \code{meanstructure = TRUE}.}

\item{prefix_yhat}{Character scalar, prefix for predicted columns. Default \code{".yhat_"}.}

\item{prefix_resid}{Character scalar, prefix for residual columns. Default \code{".resid_"}.}

\item{ci}{One of \code{c("none","delta")}. If \code{"delta"}, adds Wald CIs
using \code{vcov(fit)} and a delta method w.r.t. \eqn{\nu,\Lambda}. Default \code{"none"}.}

\item{level}{Confidence level, default \code{0.95}.}

\item{prefix_ci}{Character vector of length 2 with prefixes for lower/upper CI columns. Default: \code{c(".yhat_lwr_", ".yhat_upr_")}.}
}
\value{
A \code{tibble}. For multi-group models, includes a \code{group}
column with group labels. Predicted/residual columns are added \strong{only}
for continuous indicators; ordinal indicators are skipped. If \code{ci != "none"},
lower/upper CI columns are added for each predicted indicator.
}
\description{
Computes \eqn{\hat{y} = \nu + \Lambda \eta} for observed \strong{continuous}
indicators and returns a tibble with (a) original factor-score output
(including observed variables), (b) predicted values prefixed by
\code{prefix_yhat}, (c) residuals (observed - predicted) prefixed by
\code{prefix_resid}, and (optionally) (d) Wald-type confidence intervals
for predicted values via a delta method that treats factor scores as fixed.
}
\details{
CIs are computed as \eqn{\hat y_{ij} \pm z_{\alpha/2} \cdot \mathrm{SE}(\hat y_{ij})},
where the standard error uses a delta method with gradient
\eqn{\partial \hat y_{ij} / \partial \nu_j = 1} and
\eqn{\partial \hat y_{ij} / \partial \lambda_{jk} = \hat\eta_{ik}} for loadings
on the latent variables of indicator \eqn{j}. The covariance of free parameters
is taken from \code{vcov(fit)}; fixed parameters contribute zero.
}
\examples{
# fit <- lavaan::cfa('F =~ y1 + y2 + y3', data = dat, meanstructure = TRUE)
# out <- augment(fit, ci = "delta", level = 0.95)
# dplyr::select(out, dplyr::starts_with(".yhat_"))

}
